{"ast":null,"code":"import axios from 'axios';\nimport { remove_ending_slash } from \"../utils/remove_ending_slash\";\nimport { remove_starting_slash } from \"../utils/remove_starting_slash\";\nimport { apiConfig } from \"../config\";\nimport { AuthService } from \"../services/auth\";\nconst instance = axios.create({\n  baseURL: `${remove_ending_slash(apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.root)}/`,\n  timeout: 9000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\nfunction getInstance(options) {\n  instance.interceptors.request.use(config => {\n    try {\n      if (config && config !== null && config !== void 0 && config.headers) {\n        const token = new AuthService().getToken();\n\n        if ((typeof options.useBearerToken === \"undefined\" || options.useBearerToken) && token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n      }\n    } catch (e) {}\n\n    return config;\n  }, error => Promise.reject(error));\n  return instance;\n}\n\nconst apiClient = {\n  get(options) {\n    const instance = getInstance(options);\n    return instance.get(remove_starting_slash(options.url)).then(res => res).catch(reason => Promise.reject(reason));\n  },\n\n  post(options) {\n    const instance = getInstance(options);\n    return instance.post(remove_starting_slash(options.url), options.data).then(res => res).catch(reason => Promise.reject(reason));\n  },\n\n  put(options) {\n    const instance = getInstance(options);\n    return instance.put(remove_starting_slash(options.url), options.data).then(res => res).catch(reason => Promise.reject(reason));\n  },\n\n  patch(options) {\n    const instance = getInstance(options);\n    return instance.patch(remove_starting_slash(options.url), options.data).then(res => res).catch(reason => Promise.reject(reason));\n  },\n\n  delete(options) {\n    const instance = getInstance(options);\n    return instance.delete(remove_starting_slash(options.url)).then(res => res).catch(reason => Promise.reject(reason));\n  }\n\n};\nexport { apiClient };","map":{"version":3,"names":["axios","remove_ending_slash","remove_starting_slash","apiConfig","AuthService","instance","create","baseURL","root","timeout","headers","getInstance","options","interceptors","request","use","config","token","getToken","useBearerToken","Authorization","e","error","Promise","reject","apiClient","get","url","then","res","catch","reason","post","data","put","patch","delete"],"sources":["/home/tasfique/Documents/Personal/Projects/jest-app/src/api/apiClient.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';\nimport { remove_ending_slash } from \"@/utils/remove_ending_slash\";\nimport { remove_starting_slash } from \"@/utils/remove_starting_slash\";\nimport { apiConfig } from '@/config';\nimport {AuthService} from \"@/services/auth\";\n\ntype RequestConfig = AxiosRequestConfig & {\n    url: string,\n    useBearerToken?: boolean,\n}\n\nconst instance = axios.create({\n    baseURL: `${remove_ending_slash(apiConfig?.root)}/`,\n    timeout: 9000,\n    headers: {\n        'Content-Type': 'application/json'\n    },\n});\n\nfunction getInstance(options: RequestConfig): AxiosInstance {\n    instance.interceptors.request.use(\n        (config) => {\n            try {\n                if (config && config?.headers) {\n                    const token = new AuthService().getToken();\n\n                    if ((typeof options.useBearerToken === \"undefined\" || options.useBearerToken) && token) {\n                        config.headers.Authorization = `Bearer ${token}`\n                    }\n                }\n            } catch (e) {\n\n            }\n\n            return config;\n        },\n        (error) => Promise.reject(error)\n    );\n\n    return instance;\n}\n\n\nconst apiClient = {\n    get(options: RequestConfig) {\n        const instance: AxiosInstance = getInstance(options);\n\n        return instance\n            .get(remove_starting_slash(options.url))\n            .then((res) => res)\n            .catch((reason) => Promise.reject(reason))\n    },\n\n    post(options: RequestConfig) {\n        const instance: AxiosInstance = getInstance(options);\n\n        return instance\n            .post(remove_starting_slash(options.url), options.data)\n            .then((res) => res)\n            .catch((reason) => Promise.reject(reason))\n    },\n\n    put(options: RequestConfig) {\n        const instance: AxiosInstance = getInstance(options);\n\n        return instance\n            .put(remove_starting_slash(options.url), options.data)\n            .then((res) => res)\n            .catch((reason) => Promise.reject(reason))\n    },\n\n    patch(options: RequestConfig) {\n        const instance: AxiosInstance = getInstance(options);\n\n        return instance\n            .patch(remove_starting_slash(options.url), options.data)\n            .then((res) => res)\n            .catch((reason) => Promise.reject(reason))\n    },\n\n    delete(options: RequestConfig) {\n        const instance: AxiosInstance = getInstance(options);\n\n        return instance\n            .delete(remove_starting_slash(options.url))\n            .then((res) => res)\n            .catch((reason) => Promise.reject(reason))\n    },\n};\n\nexport { apiClient };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}