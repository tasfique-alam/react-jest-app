{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { apiClient } from \"../../../api\";\nimport { httpInitialState } from \"./httpInitialState\";\nexport const performHttpCall = createAsyncThunk(\"http/sendRequest\", async payload => {\n  const {\n    payload: httpPayload\n  } = payload;\n  return await apiClient[httpPayload === null || httpPayload === void 0 ? void 0 : httpPayload.method]({\n    url: httpPayload === null || httpPayload === void 0 ? void 0 : httpPayload.url,\n    useBearerToken: httpPayload === null || httpPayload === void 0 ? void 0 : httpPayload.useBearerToken,\n    params: httpPayload === null || httpPayload === void 0 ? void 0 : httpPayload.params,\n    data: httpPayload === null || httpPayload === void 0 ? void 0 : httpPayload.body\n  });\n});\nexport const httpSlice = createSlice({\n  name: \"http\",\n  initialState: httpInitialState,\n  reducers: {},\n\n  extraReducers(builder) {\n    builder.addCase(performHttpCall.pending, (state, _ref) => {\n      let {\n        meta\n      } = _ref;\n      state[meta.arg.correlationKey] = { ...state[meta.arg.correlationKey],\n        success: true,\n        loading: true,\n        error: null\n      };\n    });\n    builder.addCase(performHttpCall.rejected, (state, _ref2) => {\n      let {\n        meta,\n        error\n      } = _ref2;\n      state[meta.arg.correlationKey] = { ...state[meta.arg.correlationKey],\n        loading: false,\n        success: false,\n        error\n      };\n    });\n    builder.addCase(performHttpCall.fulfilled, (state, _ref3) => {\n      let {\n        meta,\n        payload\n      } = _ref3;\n      state[meta.arg.correlationKey] = { ...state[meta.arg.correlationKey],\n        loading: false,\n        success: false,\n        error: null,\n        data: payload === null || payload === void 0 ? void 0 : payload.data\n      };\n    });\n  }\n\n});\nexport const selectHttpState = state => state.http; //export const {} = httpSlice.actions;\n\nexport default httpSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","apiClient","httpInitialState","performHttpCall","payload","httpPayload","method","url","useBearerToken","params","data","body","httpSlice","name","initialState","reducers","extraReducers","builder","addCase","pending","state","meta","arg","correlationKey","success","loading","error","rejected","fulfilled","selectHttpState","http","reducer"],"sources":["/home/tasfique/Documents/Personal/Projects/jest-app/src/redux/reducers/http/httpSlice.ts"],"sourcesContent":["import {createAsyncThunk, createSlice} from \"@reduxjs/toolkit\";\nimport {AppState} from \"@/redux/store\";\nimport {AxiosRequestConfig} from 'axios';\nimport {apiClient} from \"@/api\";\nimport {HttpState, httpInitialState} from \"./httpInitialState\";\n\nexport interface HttpPayload {\n    url: string;\n    method: 'get' | 'post' | 'put' | 'delete' | 'patch';\n    params?: any;\n    body?: any;\n    headers?: AxiosRequestConfig['headers'];\n    useBearerToken?: boolean,\n    extra?: {\n        absolutePath?: boolean;\n        dontResetDefault?: boolean;\n    };\n}\n\nexport interface HttpAction {\n    correlationKey: keyof HttpState;\n    response?: any;\n    error?: any;\n    payload: HttpPayload;\n}\n\nexport const performHttpCall = createAsyncThunk(\n    \"http/sendRequest\",\n    async (payload: HttpAction) => {\n        const {payload: httpPayload} = payload;\n        return await apiClient[httpPayload?.method]({\n            url: httpPayload?.url,\n            useBearerToken: httpPayload?.useBearerToken,\n            params: httpPayload?.params,\n            data: httpPayload?.body,\n        });\n    }\n);\n\nexport const httpSlice = createSlice({\n    name: \"http\",\n    initialState: httpInitialState,\n    reducers: {},\n    extraReducers(builder) {\n        builder.addCase(performHttpCall.pending, (state, {meta}) => {\n            (state as any)[meta.arg.correlationKey] = {\n                ...(state as any)[meta.arg.correlationKey],\n                success: true,\n                loading: true,\n                error: null,\n            };\n        });\n        builder.addCase(performHttpCall.rejected, (state, {meta, error}) => {\n            (state as any)[meta.arg.correlationKey] = {\n                ...(state as any)[meta.arg.correlationKey],\n                loading: false,\n                success: false,\n                error,\n            };\n        });\n        builder.addCase(performHttpCall.fulfilled, (state, {meta, payload}) => {\n            (state as any)[meta.arg.correlationKey] = {\n                ...(state as any)[meta.arg.correlationKey],\n                loading: false,\n                success: false,\n                error: null,\n                data: payload?.data,\n            };\n        });\n    }\n});\n\nexport const selectHttpState = (state: AppState) => state.http;\n//export const {} = httpSlice.actions;\n\nexport default httpSlice.reducer;\n"],"mappings":"AAAA,SAAQA,gBAAR,EAA0BC,WAA1B,QAA4C,kBAA5C;AAGA,SAAQC,SAAR;AACA,SAAmBC,gBAAnB;AAsBA,OAAO,MAAMC,eAAe,GAAGJ,gBAAgB,CAC3C,kBAD2C,EAE3C,MAAOK,OAAP,IAA+B;EAC3B,MAAM;IAACA,OAAO,EAAEC;EAAV,IAAyBD,OAA/B;EACA,OAAO,MAAMH,SAAS,CAACI,WAAD,aAACA,WAAD,uBAACA,WAAW,CAAEC,MAAd,CAAT,CAA+B;IACxCC,GAAG,EAAEF,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEE,GADsB;IAExCC,cAAc,EAAEH,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEG,cAFW;IAGxCC,MAAM,EAAEJ,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEI,MAHmB;IAIxCC,IAAI,EAAEL,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEM;EAJqB,CAA/B,CAAb;AAMH,CAV0C,CAAxC;AAaP,OAAO,MAAMC,SAAS,GAAGZ,WAAW,CAAC;EACjCa,IAAI,EAAE,MAD2B;EAEjCC,YAAY,EAAEZ,gBAFmB;EAGjCa,QAAQ,EAAE,EAHuB;;EAIjCC,aAAa,CAACC,OAAD,EAAU;IACnBA,OAAO,CAACC,OAAR,CAAgBf,eAAe,CAACgB,OAAhC,EAAyC,CAACC,KAAD,WAAmB;MAAA,IAAX;QAACC;MAAD,CAAW;MACvDD,KAAD,CAAeC,IAAI,CAACC,GAAL,CAASC,cAAxB,IAA0C,EACtC,GAAIH,KAAD,CAAeC,IAAI,CAACC,GAAL,CAASC,cAAxB,CADmC;QAEtCC,OAAO,EAAE,IAF6B;QAGtCC,OAAO,EAAE,IAH6B;QAItCC,KAAK,EAAE;MAJ+B,CAA1C;IAMH,CAPD;IAQAT,OAAO,CAACC,OAAR,CAAgBf,eAAe,CAACwB,QAAhC,EAA0C,CAACP,KAAD,YAA0B;MAAA,IAAlB;QAACC,IAAD;QAAOK;MAAP,CAAkB;MAC/DN,KAAD,CAAeC,IAAI,CAACC,GAAL,CAASC,cAAxB,IAA0C,EACtC,GAAIH,KAAD,CAAeC,IAAI,CAACC,GAAL,CAASC,cAAxB,CADmC;QAEtCE,OAAO,EAAE,KAF6B;QAGtCD,OAAO,EAAE,KAH6B;QAItCE;MAJsC,CAA1C;IAMH,CAPD;IAQAT,OAAO,CAACC,OAAR,CAAgBf,eAAe,CAACyB,SAAhC,EAA2C,CAACR,KAAD,YAA4B;MAAA,IAApB;QAACC,IAAD;QAAOjB;MAAP,CAAoB;MAClEgB,KAAD,CAAeC,IAAI,CAACC,GAAL,CAASC,cAAxB,IAA0C,EACtC,GAAIH,KAAD,CAAeC,IAAI,CAACC,GAAL,CAASC,cAAxB,CADmC;QAEtCE,OAAO,EAAE,KAF6B;QAGtCD,OAAO,EAAE,KAH6B;QAItCE,KAAK,EAAE,IAJ+B;QAKtChB,IAAI,EAAEN,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEM;MALuB,CAA1C;IAOH,CARD;EASH;;AA9BgC,CAAD,CAA7B;AAiCP,OAAO,MAAMmB,eAAe,GAAIT,KAAD,IAAqBA,KAAK,CAACU,IAAnD,C,CACP;;AAEA,eAAelB,SAAS,CAACmB,OAAzB"},"metadata":{},"sourceType":"module"}